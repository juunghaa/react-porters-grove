import React from 'react';
import './SpecCard.css';

// 스펙 타입별 설정
const SPEC_CONFIG = {
  career: {
    label: '경력',
    bgColor: '#FFFBEB',
    textColor: '#92400E',
    icon: (
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 80 86" fill="none">
        <path d="M61.6 0C60.852 0 60.0556 0.194179 59.4 0.564474L19.8 23.1434C18.4052 23.9382 17.6 25.451 17.6 27.0947V33.3039L2.47278 41.0666C0.985584 41.8297 0 43.4464 0 45.1579C0 49.6737 0 76.7684 0 81.2842C0 83.7769 1.9712 85.8 4.4 85.8H22H74.8C77.2288 85.8 79.2 83.7769 79.2 81.2842V4.51579C79.2 2.02307 77.2288 0 74.8 0H61.6ZM57.2 22.5789C59.6288 22.5789 61.6 24.602 61.6 27.0947C61.6 29.5875 59.6288 31.6105 57.2 31.6105C54.7712 31.6105 52.8 29.5875 52.8 27.0947C52.8 24.602 54.7712 22.5789 57.2 22.5789ZM39.6 40.6421C42.0288 40.6421 44 42.6652 44 45.1579C44 47.6506 42.0288 49.6737 39.6 49.6737C37.1712 49.6737 35.2 47.6506 35.2 45.1579C35.2 42.6652 37.1712 40.6421 39.6 40.6421ZM57.2 40.6421C59.6288 40.6421 61.6 42.6652 61.6 45.1579C61.6 47.6506 59.6288 49.6737 57.2 49.6737C54.7712 49.6737 52.8 47.6506 52.8 45.1579C52.8 42.6652 54.7712 40.6421 57.2 40.6421ZM17.6 43.4645V76.7684H8.8C8.8 69.2361 8.8 54.1714 8.8 47.9803L17.6 43.4645ZM39.6 58.7053C42.0288 58.7053 44 60.7283 44 63.2211C44 65.7138 42.0288 67.7368 39.6 67.7368C37.1712 67.7368 35.2 65.7138 35.2 63.2211C35.2 60.7283 37.1712 58.7053 39.6 58.7053ZM57.2 58.7053C59.6288 58.7053 61.6 60.7283 61.6 63.2211C61.6 65.7138 59.6288 67.7368 57.2 67.7368C54.7712 67.7368 52.8 65.7138 52.8 63.2211C52.8 60.7283 54.7712 58.7053 57.2 58.7053Z" fill="#FFD465"/>
      </svg>
    )
  },
  award: {
    label: '수상',
    bgColor: '#FFF1F2',
    textColor: '#D03232',
    icon: (
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
        <path d="M5.24316 2.19727C3.58641 2.19727 2.24316 3.54052 2.24316 5.19727C2.24316 6.48127 2.95866 7.46376 4.09491 8.17401C4.59441 8.48601 4.92141 8.63525 5.29116 8.7545C5.49966 9.7235 6.24291 10.5725 7.49316 11.1973V13.4473H7.11816C6.49716 13.4473 5.99316 13.9513 5.99316 14.5723C5.99316 15.1933 6.49716 15.6973 7.11816 15.6973H7.49316H10.4932H10.8682C11.4892 15.6973 11.9932 15.1933 11.9932 14.5723C11.9932 13.9513 11.4892 13.4473 10.8682 13.4473H10.4932V11.1973C11.7434 10.5725 12.4409 9.79401 12.6862 8.76576C13.0184 8.66076 13.3919 8.48601 13.8914 8.17401C15.0277 7.46376 15.7432 6.48127 15.7432 5.19727C15.7432 3.54052 14.3999 2.19727 12.7432 2.19727H11.9932H5.99316H5.24316ZM5.24316 3.69727V7.09552C5.12541 7.03327 5.00467 6.97852 4.89142 6.90802C4.15267 6.44602 3.74316 5.88202 3.74316 5.19727C3.74316 4.36852 4.41441 3.69727 5.24316 3.69727ZM12.7432 3.69727C13.5719 3.69727 14.2432 4.36852 14.2432 5.19727C14.2432 5.88202 13.8336 6.44602 13.0949 6.90802C12.9817 6.97852 12.8609 7.03327 12.7432 7.09552V3.69727Z" fill="#FF0000" fillOpacity="0.3"/>
      </svg>
    )
  },
  certification: {
    label: '자격증',
    bgColor: '#F2FAD0',
    textColor: '#5F7A15',
    icon: (
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 119 119" fill="none">
        <path fillRule="evenodd" clipRule="evenodd" d="M59.4008 9.90039C37.5303 9.90039 19.8008 27.6299 19.8008 49.5004C19.8008 71.371 37.5303 89.1004 59.4008 89.1004C81.2714 89.1004 99.0008 71.371 99.0008 49.5004C99.0008 27.6299 81.2714 9.90039 59.4008 9.90039ZM46.7771 46.1361C48.6985 44.8675 51.3095 45.0789 53.0009 46.7704L57.304 51.0735L66.9619 41.4155C67.2035 41.1738 67.4638 40.9624 67.7386 40.7812C69.6597 39.5126 72.2708 39.724 73.9622 41.4155C75.8952 43.3485 75.8952 46.4827 73.9622 48.4158L60.8041 61.5739C58.8711 63.5069 55.7368 63.5069 53.8038 61.5739L46.0006 53.7708C45.759 53.5292 45.5475 53.2688 45.3663 52.9941C44.0977 51.073 44.3091 48.4618 46.0006 46.7704C46.2422 46.5287 46.5027 46.3173 46.7771 46.1361Z" fill="#BAD640"/>
        <path fillRule="evenodd" clipRule="evenodd" d="M19.8008 49.5004C19.8008 27.6299 37.5303 9.90039 59.4008 9.90039C81.2714 9.90039 99.0008 27.6299 99.0008 49.5004C99.0008 71.371 81.2714 89.1004 59.4008 89.1004C37.5303 89.1004 19.8008 71.371 19.8008 49.5004ZM53.0009 46.7704C51.3095 45.0789 48.6985 44.8675 46.7771 46.1361C46.5027 46.3173 46.2422 46.5287 46.0006 46.7704C44.3091 48.4618 44.0977 51.073 45.3663 52.9941C45.5475 53.2688 45.759 53.5292 46.0006 53.7708L53.8038 61.5739C55.7368 63.5069 58.8711 63.5069 60.8041 61.5739L73.9622 48.4158C75.8952 46.4827 75.8952 43.3485 73.9622 41.4155C72.2708 39.724 69.6597 39.5126 67.7386 40.7812C67.4638 40.9624 67.2035 41.1738 66.9619 41.4155L57.304 51.0735L53.0009 46.7704Z" fill="#BAD640"/>
        <path d="M34.6504 103.951V86.5488C41.7294 91.287 50.2424 94.0505 59.4004 94.0505C68.5584 94.0505 77.0714 91.287 84.1504 86.5488V103.951C84.1504 105.532 83.3945 107.019 82.1164 107.951C80.8378 108.882 79.1915 109.147 77.6857 108.663L59.4004 102.786L41.1151 108.663C39.6093 109.147 37.9627 108.882 36.6845 107.951C35.4064 107.019 34.6504 105.532 34.6504 103.951Z" fill="#BAD640"/>
      </svg>
    )
  },
  globalexp: {
    label: '해외경험',
    bgColor: '#ECFDF5',
    textColor: '#065F46',
    icon: (
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 119 119" fill="none">
        <path d="M59.4003 9.96484C32.0615 9.96484 9.90039 32.126 9.90039 59.4648C9.90039 86.8036 32.0615 108.965 59.4003 108.965C86.7392 108.965 108.9 86.8036 108.9 59.4648C108.9 32.126 86.7392 9.96484 59.4003 9.96484ZM59.4003 19.8648C65.9343 19.8648 73.1118 34.8733 74.2057 54.5L44.6543 54.5594C45.7433 34.9326 52.8663 19.8648 59.4003 19.8648ZM41.9219 23.8397C37.6649 32.1211 35.3879 43.1002 34.8384 54.5248L20.0875 54.4802C21.5626 40.9915 30.6458 29.6758 41.9219 23.8397ZM76.9036 23.8645C88.1796 29.7005 97.0301 40.6994 98.7379 54.5594L83.9918 54.5148C83.5265 42.6348 80.8982 32.1904 76.9036 23.8645ZM20.1172 64.4346L34.8632 64.3108C35.4127 75.7354 37.7045 86.9026 41.9417 95.0948C30.1013 89.1598 21.82 77.5422 20.1172 64.4346ZM44.5751 64.4741L74.1266 64.4098C73.0376 84.0316 65.9343 99.0647 59.4003 99.0647C52.8663 99.0647 45.6641 84.1009 44.5751 64.4741ZM84.0166 64.4247L98.6983 64.3802C96.9955 77.4927 88.7192 89.2044 76.8838 95.0405C81.2794 85.9523 83.4672 75.8493 84.0166 64.4247Z" fill="#74E6BC"/>
      </svg>
    )
  },
  foreignlang: {
    label: '외국어',
    bgColor: '#EEF2FF',
    textColor: '#3730A3',
    icon: (
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 119 119" fill="none">
        <path d="M101.473 42.0746H56.9232C53.6423 42.0785 50.497 43.3835 48.1771 45.7035C45.8572 48.0234 44.5521 51.1687 44.5482 54.4496V84.1496C44.5521 87.4304 45.8572 90.5758 48.1771 92.8957C50.497 95.2156 53.6423 96.5206 56.9232 96.5246H81.886L92.6597 107.301C93.1789 107.82 93.8406 108.174 94.5609 108.317C95.2813 108.461 96.028 108.387 96.7066 108.106C97.3852 107.825 97.9651 107.349 98.3731 106.738C98.781 106.127 98.9985 105.409 98.9982 104.675V96.5246H101.473C104.754 96.5206 107.899 95.2156 110.219 92.8957C112.539 90.5758 113.844 87.4304 113.848 84.1496V54.4496C113.844 51.1687 112.539 48.0234 110.219 45.7035C107.899 43.3835 104.754 42.0785 101.473 42.0746ZM91.5732 65.5871H90.1897C89.6176 70.6974 87.2899 75.4509 83.6037 79.0362C85.7305 79.9516 88.0203 80.428 90.3357 80.4371C91.0015 80.4335 91.6423 80.6904 92.1214 81.1528C92.6004 81.6152 92.8798 82.2465 92.8998 82.9121C92.9097 83.2325 92.8553 83.5517 92.7399 83.8507C92.6245 84.1498 92.4503 84.4227 92.2277 84.6534C92.0051 84.8841 91.7386 85.0679 91.4438 85.1939C91.149 85.3199 90.832 85.3856 90.5114 85.3871C86.555 85.3762 82.6709 84.3265 79.2477 82.3428C75.8559 84.3347 71.9941 85.3856 68.0607 85.3871C67.3949 85.3906 66.754 85.1337 66.275 84.6713C65.7959 84.2089 65.5166 83.5776 65.4966 82.9121C65.4867 82.5916 65.541 82.2725 65.6564 81.9734C65.7719 81.6743 65.946 81.4014 66.1686 81.1707C66.3912 80.94 66.6578 80.7563 66.9526 80.6303C67.2474 80.5043 67.5644 80.4386 67.885 80.4371C70.2764 80.4399 72.6434 79.9566 74.8422 79.0164C72.9233 77.1915 71.351 75.0339 70.2016 72.6482C70.0501 72.3533 69.9595 72.031 69.935 71.7003C69.9106 71.3697 69.9528 71.0375 70.0592 70.7235C70.1656 70.4095 70.334 70.1201 70.5544 69.8724C70.7748 69.6247 71.0427 69.4239 71.3422 69.2817C71.6418 69.1396 71.9668 69.0591 72.298 69.045C72.6293 69.0309 72.96 69.0835 73.2705 69.1996C73.581 69.3158 73.865 69.4932 74.1057 69.7212C74.3463 69.9493 74.5387 70.2233 74.6714 70.5272C75.7391 72.7696 77.2781 74.7552 79.1833 76.3484C82.4433 73.6244 84.5817 69.7918 85.1877 65.5871H66.8232C66.1668 65.5871 65.5372 65.3263 65.0731 64.8622C64.6089 64.398 64.3482 63.7685 64.3482 63.1121C64.3482 62.4557 64.6089 61.8261 65.0731 61.362C65.5372 60.8978 66.1668 60.6371 66.8232 60.6371H76.7232V55.6871C76.7232 55.0307 76.9839 54.4011 77.4481 53.937C77.9122 53.4728 78.5418 53.2121 79.1982 53.2121C79.8546 53.2121 80.4841 53.4728 80.9483 53.937C81.4124 54.4011 81.6732 55.0307 81.6732 55.6871V60.6371H91.5732C92.2296 60.6371 92.8591 60.8978 93.3233 61.362C93.7874 61.8261 94.0482 62.4557 94.0482 63.1121C94.0482 63.7685 93.7874 64.398 93.3233 64.8622C92.8591 65.3263 92.2296 65.5871 91.5732 65.5871ZM39.5982 35.6816L35.5664 44.5496H42.7266C42.9048 44.3021 43.0954 44.0546 43.2884 43.8071L39.5982 35.6816Z" fill="#A6AEFF"/>
        <path d="M61.8762 14.8496H17.3262C14.0453 14.8535 10.9 16.1586 8.58007 18.4785C6.26015 20.7984 4.9551 23.9438 4.95117 27.2246V56.9246C4.9551 60.2055 6.26015 63.3508 8.58007 65.6707C10.9 67.9906 14.0453 69.2957 17.3262 69.2996H19.8012V77.4498C19.8008 78.1843 20.0184 78.9024 20.4263 79.5132C20.8342 80.1241 21.4142 80.6002 22.0927 80.8813C22.7713 81.1624 23.518 81.2359 24.2384 81.0925C24.9588 80.9492 25.6204 80.5953 26.1396 80.0758L36.9133 69.2996H39.6012V54.4496C39.6062 52.7723 39.8564 51.1046 40.3437 49.4996H33.3196L29.4784 57.9493C29.1974 58.5318 28.6996 58.9813 28.0914 59.2013C27.4832 59.4214 26.813 59.3947 26.2243 59.1269C25.6355 58.859 25.1751 58.3714 24.9414 57.7683C24.7077 57.1652 24.7194 56.4946 24.9739 55.9L37.3489 28.675C37.5458 28.2429 37.8628 27.8765 38.2622 27.6196C38.6615 27.3627 39.1263 27.2261 39.6012 27.2261C40.076 27.2261 40.5408 27.3627 40.9402 27.6196C41.3395 27.8765 41.6566 28.2429 41.8534 28.675L47.093 40.201C49.9795 38.1952 53.4112 37.1216 56.9262 37.1246H74.2512V27.2246C74.2472 23.9438 72.9422 20.7984 70.6223 18.4785C68.3024 16.1586 65.157 14.8535 61.8762 14.8496Z" fill="#A6AEFF"/>
      </svg>
    )
  }
};

// 날짜 포맷팅
const formatDate = (dateStr) => {
  if (!dateStr) return '';
  return dateStr.replace(/-/g, '.');
};

// 스펙 타입별 데이터 추출
const getSpecData = (spec, type) => {
  switch (type) {
    case 'career':
      return {
        title: spec.task_detail || '',
        details: [spec.company_name, spec.position, spec.result_detail].filter(Boolean),
        dateStart: spec.period_start,
        dateEnd: spec.period_end,
        isSingleDate: false
      };
    case 'award':
      return {
        title: spec.awards_name || '',
        details: [spec.issuer, spec.awards_grade].filter(Boolean),
        dateStart: spec.achievement_date,
        dateEnd: null,
        isSingleDate: true
      };
    case 'certification':
      return {
        title: spec.c_name || '',
        details: [spec.issuer].filter(Boolean),
        dateStart: spec.achievement_date,
        dateEnd: spec.expiration_date,
        isSingleDate: false
      };
    case 'globalexp':
      return {
        title: spec.nation || '',
        details: [spec.g_category, spec.description].filter(Boolean),
        dateStart: spec.period_start,
        dateEnd: spec.period_end,
        isSingleDate: false
      };
    case 'foreignlang':
      return {
        title: spec.lang_name || '',
        details: [spec.lang_level, spec.exam_name, spec.exam_grade].filter(Boolean),
        dateStart: spec.achievement_date,
        dateEnd: null,
        isSingleDate: true
      };
    default:
      return {
        title: '',
        details: [],
        dateStart: null,
        dateEnd: null,
        isSingleDate: true
      };
  }
};

const SpecCard = ({ spec, type }) => {
  if (!spec || !type) return null;

  const config = SPEC_CONFIG[type];
  const data = getSpecData(spec, type);

  if (!config) return null;

  return (
    <div className="spec-card">
      {/* 태그 */}
      <div 
        className="spec-tag"
        style={{ 
          backgroundColor: config.bgColor,
        }}
      >
        {config.icon}
        <span style={{ color: config.textColor }}>{config.label}</span>
      </div>

      {/* 타이틀 */}
      <h4 className="spec-card-title">{data.title}</h4>

      {/* 세부정보 */}
      <div className="spec-card-details">
        {data.details.map((detail, index) => (
          <React.Fragment key={index}>
            <span>{detail}</span>
            {index < data.details.length - 1 && <span className="dot">·</span>}
          </React.Fragment>
        ))}
      </div>

      {/* 구분선 */}
      <div className="spec-card-divider" />

      {/* 날짜 */}
      <div className="spec-card-date">
        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17" fill="none">
          <path d="M5.69644 1.42773C5.30544 1.42773 4.98811 1.74507 4.98811 2.13607C3.42198 2.13607 2.13281 3.40611 2.13281 4.9694V6.38607L2.15477 12.0527C2.15477 13.6153 3.4234 14.8861 4.98811 14.8861H12.0714C13.6362 14.8861 14.9048 13.6174 14.9048 12.0527L14.8828 6.38607V4.9694C14.8828 3.40328 13.6347 2.13607 12.0714 2.13607C12.0714 1.74507 11.7548 1.42773 11.3631 1.42773C10.9721 1.42773 10.6548 1.74507 10.6548 2.13607H6.40478C6.40478 1.74507 6.08815 1.42773 5.69644 1.42773ZM4.98811 3.55273C4.98811 3.94373 5.30544 4.26107 5.69644 4.26107C6.08815 4.26107 6.40478 3.94373 6.40478 3.55273H10.6548C10.6548 3.94373 10.9721 4.26107 11.3631 4.26107C11.7548 4.26107 12.0714 3.94373 12.0714 3.55273C12.8485 3.55273 13.4661 4.18173 13.4661 4.9694V5.67773C12.1033 5.67773 4.91231 5.67773 3.54948 5.67773V4.9694C3.54948 4.19236 4.20044 3.55273 4.98811 3.55273ZM3.54948 7.0944C4.91231 7.0944 12.1033 7.0944 13.4661 7.0944L13.4881 12.0527C13.4881 12.8326 12.8542 13.4694 12.0714 13.4694H4.98811C4.20611 13.4694 3.57144 12.8354 3.57144 12.0527L3.54948 7.0944Z" fill="#303030" fillOpacity="0.4"/>
        </svg>
        <span>
          {data.isSingleDate 
            ? formatDate(data.dateStart)
            : `${formatDate(data.dateStart)} ~ ${formatDate(data.dateEnd) || '현재'}`
          }
        </span>
      </div>
    </div>
  );
};

export default SpecCard;